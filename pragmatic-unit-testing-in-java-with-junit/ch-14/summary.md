# 14장 | 프로젝트에서 테스트

<br>

## 빠른 도입

단위 테스트는 품질 통제를 위한 안전장치다. 처음부터 통제하며 개발해야 한다.
단위 테스트를 무시하면 짧은 기간 안에 많은 코드를 작성할 수는 있겠지만, 엉망이 된 코드에서 결함을 발견하고 고치는 시간은 수 배로 걸린다. 첫날부터 품질을 통제하고 단위 테스트를 습관화해야 한다.

<br>

## 단위 테스트 표준 만들기

기본적으로 아래와 같은 표준으로 시작하고, 계속 표준들을 살피고 수정해야 한다.

1. 코드를 체크인하기 전에 어떤 테스트를 실행해야 할지 여부
2. 테스트 클래스와 메서드의 이름 짓는 방식
3. hemcrest 혹은 전통적인 assertion 사용 방식
4. AAA 사용 여부
5. Mock 도구 선택
6. 테스트를 실행할 때 콘솔에 출력을 허용할지 여부
7. 단위 테스트 스위트에서 느린 테스트를 분명하게 식별하고 막을 방법

<br>

## 리뷰로 표준 준수 높이기

어떻게 코드 리뷰를 할 것인지에 대해 규칙을 정하고 준수해야 한다.

### 짝 프로그래밍을 이용한 리뷰

짝 프로그래밍은 적극적인 형태의 리뷰고, 코드를 깊이 이해한다는 점에서 최상의 리뷰를 기대할 수 있다. 

<br> 

## 지속적 통합(CI)으로 수렴

야간 빌드(nightly build)로 통합된 소프트웨어를 테스트하면 충돌을 발견하고 고치고 다시 수렴하는 과정이 아주 오래걸린다.
지속적인 통합(Continuous Integeration)이 해결책이다. 코드를 더 자주 통합하고 결과를 매번 검증하는 것이다. Jenkins와 같은 도구를 활용하는 것은 현대 개발에 필수요건이다.

<br>

## 코드 커버리지

코드 커버리지는 단위 테스트가 실행한 코드의 전체 퍼스트를 측정하는 것이다. 툴을 활용하면 테스트가 커버하지 않은 부분을 쉽게 확인할 수 있다. 보통 습관적으로 단위 테스트를 작성하는 팀은 쉽게 70%의 코드 커버리지를 달성한다.
하지만 무조건 100% 코드 커버리지를 달성하는 것만이 목표가 되어서는 안 된다. 커버리지 퍼센트 자체가 좋은 테스트와 좋은 구조를 보장하지는 않기 때문이다. 따라서, 숫자 그 자체에 의미를 둘 것이 아니라, 추세와 빈 영역에 집중하며 코드 커버리지 지표를 활용해야 한다.
